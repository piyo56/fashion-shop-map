<h1>Shop#show</h1>

<%= render 'choices'%>

<% if @error_msg %>
  <span style="color: red; font-weight: bold;"> Error: <%= @error_msg %> </span>
<% else %>
  <div id="multi_markers"></div>
  <script>
  var handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'multi_markers'}}, function(){
    var markers = handler.addMarkers([
        <% @branches.each do |b| %>
          { lat: <%= b.latitude %>, lng: <%= b.longitude %>},
        <% end %>
    ]);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  });
  </script>
<% end %>
