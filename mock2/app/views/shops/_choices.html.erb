<div id="choices">
  <%= form_tag(shops_show_path, {class: "ui form", method: :get}) do%>

    <div class="container">
    <div class="row">
      <div class="col-sm-2 col-xs-offset-3">
        <div class="button-group">
          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">
            <span>ショップ選択&nbsp;</span><span class="glyphicon glyphicon-menu-down"></span>            <!-- <span class="glyphicon glyphicon&#45;cog"></span> -->
            <!-- <span class="caret"></span> -->
          </button>
          <ul class="dropdown-menu">
            <% @shops.each do |shop| %>
              <li><a href="javascript:void(0)" class="small" data-value="option1" tabIndex="-1">
                <input type="checkbox" name="s_ids[]" value=<%= shop.id %> <%= 'checked="checked"' if @selected_shop_ids && @selected_shop_ids.include?(shop.id) %>>&nbsp;<%= shop.name %>
              </a></li>
            <% end %>
          </ul>
        </div>
      </div>
      <div class="col-sm-2">
        <div class="button-group">
          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">
            <span>都道府県選択&nbsp;</span><span class="glyphicon glyphicon-menu-down"></span>
            <!-- <span class="glyphicon glyphicon&#45;cog"></span> -->
            <!-- <span class="caret"></span> -->
          </button>
          <ul class="dropdown-menu">
            <% @prefectures.each do |prefecture| %>
              <li><a href="javascript:void(0)" class="small" data-value="option1" tabIndex="-1">
                  <input type="checkbox" name="p_ids[]" value=<%= prefecture.id %> <%= 'checked="checked"' if @selected_prefecture_ids && @selected_prefecture_ids.include?(prefecture.id) %>>&nbsp;<%= prefecture.name %>
              </a> </li>
            <% end %>
          </ul>
        </div>
      </div>
      <div class="col-sm-2">
        <%= submit_tag('検索', {id:"search_btn", class: "btn btn-primary btn-md", disabled:"disabled"}) %>
      </div>
    </div>
  <% end %>
</div>
<script>
enable_search = function(){
  if ($('input[name="s_ids[]"]:checked').length === 0){
    $("#search_btn").prop("disabled", true);
  }else{
    $("#search_btn").prop("disabled", false);
  }
  setTimeout(enable_search, 200)
};
$(document).ready(function(){
  enable_search();
});

$('.dropdown-menu a').on('click', function() {
  $(this).find('input').prop("checked", !checkBoxes.prop("checked"));
  return false;
});
</script>
</div>
